version: '3.8'

services:
  postgres:
    image: postgres:15-alpine
    environment:
      POSTGRES_DB: ${POSTGRES_DB:-titan_db}
      POSTGRES_USER: ${POSTGRES_USER:-titan}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-titan_secure_pass}
    ports:
      - "${POSTGRES_PORT:-5432}:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    networks:
      - titan_network

  redis:
    image: redis:7-alpine
    ports:
      - "${REDIS_PORT:-6379}:6379"
    networks:
      - titan_network

  sandbox_python:
    image: python:3.11-alpine
    network_mode: none
    volumes:
      - ./workspace:/workspace
    command: tail -f /dev/null

  sandbox_node:
    image: node:20-alpine
    network_mode: none
    volumes:
      - ./workspace:/workspace
    command: tail -f /dev/null

  sandbox_go:
    image: golang:1.21-alpine
    network_mode: none
    volumes:
      - ./workspace:/workspace
    command: tail -f /dev/null

  sandbox_rust:
    image: rust:1.73-alpine
    network_mode: none
    volumes:
      - ./workspace:/workspace
    command: tail -f /dev/null

networks:
  titan_network:
    driver: bridge

volumes:
  postgres_data:
